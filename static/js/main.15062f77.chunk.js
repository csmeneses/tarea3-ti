/*! For license information please see main.15062f77.chunk.js.LICENSE.txt */
(this["webpackJsonptarea3-ti"]=this["webpackJsonptarea3-ti"]||[]).push([[0],{120:function(e,t,n){},122:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t);var c,s=n(0),a=n(64),i=n.n(a),r=(n(73),n(68)),o=n(17),j=n(65),l=n.n(j),u=n(35),b=n.n(u),h=(n(120),n(1)),O=n(34).v4,d=function(e){var t=e.airline,n=e.code,c=e.destination,a=e.origin,i=e.passengers,r=e.plane,j=e.seats,l=Object(s.useState)(""),u=Object(o.a)(l,2),d=u[0],f=u[1],p=Object(s.useState)(""),m=Object(o.a)(p,2),x=m[0],g=m[1];return Object(s.useEffect)((function(){b.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(a[1],",").concat(a[0],".json?access_token=pk.eyJ1IjoiY3NtZW5lc2VzIiwiYSI6ImNraWRueWxkZjB0cHQyeG80OHJ0cjhwMG0ifQ.04KZZVYMSB3lpPSby2Guqw")).then((function(e){var t=e.data.features;t.length,g(t[t.length-2].place_name)})).catch((function(e){console.log(e)}))})),Object(s.useEffect)((function(){b.a.get("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(c[1],",").concat(c[0],".json?access_token=pk.eyJ1IjoiY3NtZW5lc2VzIiwiYSI6ImNraWRueWxkZjB0cHQyeG80OHJ0cjhwMG0ifQ.04KZZVYMSB3lpPSby2Guqw")).then((function(e){var t=e.data.features;t.length,f(t[t.length-2].place_name)})).catch((function(e){console.log(e)}))})),Object(h.jsxs)("div",{className:"flight",children:[Object(h.jsxs)("h3",{children:["Flight ",n]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Airline:"})," ",t]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Destination:"})," ",d]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Origin:"})," ",x]}),Object(h.jsx)("p",{children:Object(h.jsx)("b",{children:"Passengers:"})}),i.map((function(e){var t=e.name,n=e.age;return Object(h.jsx)("div",{children:Object(h.jsx)("ul",{children:Object(h.jsxs)("li",{children:[t," (",n,")"]})})},O())})),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Plane:"})," ",r]}),Object(h.jsxs)("p",{children:[Object(h.jsx)("b",{children:"Seats:"})," ",j]})]})},f=(n(122),n(34).v4),p=function(e){var t=e.askFlights,n=e.flights;return Object(h.jsxs)("div",{children:[Object(h.jsx)("h2",{children:"INFO"}),Object(h.jsx)("button",{className:"infoButton",onClick:function(e){return t(e)},children:"Get Info"}),n.map((function(e){var t=e.airline,n=e.code,c=e.destination,s=e.origin,a=e.passengers,i=e.plane,r=e.seats;return Object(h.jsx)(d,{airline:t,code:n,destination:c,origin:s,passengers:a,plane:i,seats:r},f())}))]})},m=n(66),x=n.n(m),g=(n(124),function(e){var t=e.name,n=e.date,c=e.message,s=new Date(parseInt(n)),a=x()(s).format("DD/MM/YYYY HH:mm");return Object(h.jsxs)("div",{className:"mensaje",children:[Object(h.jsxs)("b",{children:[t,":"]}),Object(h.jsx)("br",{}),"[",a,"] ",c,Object(h.jsx)("br",{})]})}),v=(n(125),n(34).v4),y=function(e){var t=e.messages;return Object(h.jsxs)("div",{className:"Mensajes",children:[Object(h.jsx)("h2",{children:"Messages"}),t.map((function(e){var t=e.name,n=e.date,c=e.message;return Object(h.jsx)(g,{name:t,date:n,message:c},v())}))]})},N=(n(126),n(134)),S=n(133),k=function(){return Object(h.jsxs)("div",{className:"map-container",children:[Object(h.jsx)("h2",{children:"Flight Map"}),Object(h.jsx)(N.a,{className:"map",center:[-30,-70],zoom:4,style:{height:400,width:"50%"},children:Object(h.jsx)(S.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})})]})},I=function(){var e=Object(s.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],i=Object(s.useState)(""),j=Object(o.a)(i,2),u=j[0],b=j[1],O=Object(s.useState)([]),d=Object(o.a)(O,2),f=d[0],m=d[1],x=Object(s.useState)([]),g=Object(o.a)(x,2),v=g[0],N=g[1];Object(s.useEffect)((function(){c=l()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl/",{path:"/flights"})}),[]),Object(s.useEffect)((function(){c.on("CHAT",(function(e){console.log(e),m((function(t){return[].concat(Object(r.a)(t),[e])}))}))}),[]),Object(s.useEffect)((function(){c.on("FLIGHTS",(function(e){console.log(e),N(e)}))}),[]);var S=function(e){e.preventDefault(),console.log(u),u&&c.emit("CHAT",{name:n,message:u},(function(){return b("")})),b("")};return Object(h.jsxs)("div",{className:"home",children:[Object(h.jsx)("h1",{children:"Control Center"}),Object(h.jsx)(k,{}),Object(h.jsx)(p,{askFlights:function(e){e.preventDefault(),console.log("Pidiendo vuelos"),c.emit("FLIGHTS")},flights:v}),Object(h.jsx)("h2",{children:"Chat"}),Object(h.jsx)("div",{className:"form-chat",children:Object(h.jsxs)("form",{className:"form",children:[Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Enter your name",value:n,onChange:function(e){var t=e.target.value;return a(t)}}),Object(h.jsx)("input",{className:"input",type:"text",placeholder:"Type a message...",value:u,onChange:function(e){var t=e.target.value;return b(t)},onKeyPress:function(e){return"Enter"===e.key?S(e):null}}),Object(h.jsx)("button",{className:"sendButton",onClick:function(e){return S(e)},children:"Send"})]})}),Object(h.jsx)(y,{messages:f})]})},w=n(67),H=n(4),M=function(){return Object(h.jsx)(w.a,{children:Object(h.jsx)(H.a,{path:"/tarea3-ti",exact:!0,component:I})})};i.a.render(Object(h.jsx)(M,{}),document.getElementById("root"))}},[[131,1,2]]]);
//# sourceMappingURL=main.15062f77.chunk.js.map