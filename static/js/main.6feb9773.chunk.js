/*! For license information please see main.6feb9773.chunk.js.LICENSE.txt */
(this["webpackJsonptarea3-ti"]=this["webpackJsonptarea3-ti"]||[]).push([[0],{126:function(e,t,n){},128:function(e,t,n){},130:function(e,t,n){},131:function(e,t,n){},132:function(e,t,n){},137:function(e,t,n){"use strict";n.r(t);var c=n(0),s=n(29),i=n.n(s),r=(n(78),n(19)),a=n(18),o=n(70),j=n.n(o),l=(n(108),n(126),n(1)),u=n(28).v4,b=function(e){var t=e.airline,n=e.code,s=e.destination,i=e.origin,r=e.passengers,o=e.plane,j=e.seats,b=Object(c.useState)(""),d=Object(a.a)(b,2),O=(d[0],d[1],Object(c.useState)("")),h=Object(a.a)(O,2);h[0],h[1];return Object(l.jsxs)("div",{className:"flight",children:[Object(l.jsxs)("h3",{children:["Flight ",n]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("b",{children:"Airline:"})," ",t]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("b",{children:"Destination:"})," ",s[0],", ",s[1]]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("b",{children:"Origin:"})," ",i[0],", ",i[1]]}),Object(l.jsx)("p",{children:Object(l.jsx)("b",{children:"Passengers:"})}),r.map((function(e){var t=e.name,n=e.age;return Object(l.jsx)("div",{children:Object(l.jsx)("ul",{children:Object(l.jsxs)("li",{children:[t," (",n,")"]})})},u())})),Object(l.jsxs)("p",{children:[Object(l.jsx)("b",{children:"Plane:"})," ",o]}),Object(l.jsxs)("p",{children:[Object(l.jsx)("b",{children:"Seats:"})," ",j]})]})},d=(n(128),n(28).v4),O=function(e){var t=e.askFlights,n=e.flights;return Object(l.jsxs)("div",{children:[Object(l.jsx)("h2",{children:"INFO"}),Object(l.jsx)("button",{className:"infoButton",onClick:function(e){return t(e)},children:"Get Info"}),n.map((function(e){var t=e.airline,n=e.code,c=e.destination,s=e.origin,i=e.passengers,r=e.plane,a=e.seats;return Object(l.jsx)(b,{airline:t,code:n,destination:c,origin:s,passengers:i,plane:r,seats:a},d())}))]})},h=n(71),p=n.n(h),f=(n(130),function(e){var t=e.name,n=e.date,c=e.message,s=new Date(parseInt(n)),i=p()(s).format("DD/MM/YYYY HH:mm");return Object(l.jsxs)("div",{className:"mensaje",children:[Object(l.jsxs)("b",{children:[t,":"]}),Object(l.jsx)("br",{}),"[",i,"] ",c,Object(l.jsx)("br",{})]})}),x=(n(131),n(28).v4),m=function(e){var t=e.messages;return Object(l.jsxs)("div",{className:"Mensajes",children:[Object(l.jsx)("h2",{children:"Messages"}),t.map((function(e){var t=e.name,n=e.date,c=e.message;return Object(l.jsx)(f,{name:t,date:n,message:c},x())}))]})},g=(n(132),n(35)),v=n(141),S=n(142),y=n(5),N=n.n(y),w=n(138),I=n(139),k=n.p+"static/media/airport.e74b3de2.png";function C(e){return new N.a.Icon({iconUrl:k,iconSize:[e,e]})}var F=function(e){var t=e.coords_dest,n=e.coords_ori;return Object(l.jsxs)("div",{children:[Object(l.jsx)(w.a,{position:t,icon:C(25)}),Object(l.jsx)(w.a,{position:n,icon:C(25)}),Object(l.jsx)(I.a,{positions:[n,t],color:"red",dashArray:"25"})]})},E=n(140),H=n.p+"static/media/plane.7d45d166.png";var P=function(e){var t,n=e.code,c=e.planes.filter((function(e){return e.code===n})),s=new Set(c.map((function(e){return e.position}))),i=Object(g.a)(Array,Object(r.a)(s));return Object(l.jsxs)("div",{children:[Object(l.jsx)(w.a,{position:i[i.length-1],icon:(t=35,new N.a.Icon({iconUrl:H,iconSize:[t,t]})),onmouseover:function(e){e.target.openPopup()},onmouseout:function(e){e.target.closePopup()},children:Object(l.jsxs)(E.a,{children:["Flight ",c[c.length-1].code]})}),Object(l.jsx)(I.a,{positions:i,color:"darkblue",weight:"6"})]})},T=n(28).v4;var A,D=function(e){var t=e.flights,n=e.planes,c=new Set(n.map((function(e){return e.code}))),s=Object(g.a)(Array,Object(r.a)(c));return Object(l.jsxs)("div",{className:"map-container",children:[Object(l.jsx)("h2",{children:"Flight Map"}),Object(l.jsxs)(v.a,{className:"map",center:[-37,-67],zoom:4,style:{height:400,width:"100%"},children:[Object(l.jsx)(S.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),t.map((function(e){var t=e.destination,n=e.origin;return Object(l.jsx)(F,{coords_dest:t,coords_ori:n},T())})),s.map((function(e){return Object(l.jsx)(P,{code:e,planes:n},T())}))]})]})},M=function(){var e=Object(c.useState)(""),t=Object(a.a)(e,2),n=t[0],s=t[1],i=Object(c.useState)(""),o=Object(a.a)(i,2),u=o[0],b=o[1],d=Object(c.useState)([]),h=Object(a.a)(d,2),p=h[0],f=h[1],x=Object(c.useState)([]),g=Object(a.a)(x,2),v=g[0],S=g[1],y=Object(c.useState)([]),N=Object(a.a)(y,2),w=N[0],I=N[1];Object(c.useEffect)((function(){(A=j()("wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl/",{path:"/flights"})).emit("FLIGHTS")}),[]),Object(c.useEffect)((function(){A.on("CHAT",(function(e){console.log(e),f((function(t){return[].concat(Object(r.a)(t),[e])}))}))}),[]),Object(c.useEffect)((function(){A.on("FLIGHTS",(function(e){console.log(e),S(e)}))}),[]),Object(c.useEffect)((function(){A.on("POSITION",(function(e){I((function(t){return[].concat(Object(r.a)(t),[e])}))}))}),[]);var k=function(e){e.preventDefault(),console.log(u),u&&A.emit("CHAT",{name:n,message:u},(function(){return b("")})),b("")};return Object(l.jsxs)("div",{className:"home",children:[Object(l.jsx)("h1",{children:"Control Center"}),Object(l.jsx)(D,{flights:v,planes:w}),Object(l.jsx)(O,{askFlights:function(e){e.preventDefault(),console.log("Pidiendo vuelos"),A.emit("FLIGHTS")},flights:v}),Object(l.jsx)("h2",{children:"Chat"}),Object(l.jsx)("div",{className:"form-chat",children:Object(l.jsxs)("form",{className:"form",children:[Object(l.jsx)("input",{className:"input",type:"text",placeholder:"Enter your name",value:n,onChange:function(e){var t=e.target.value;return s(t)}}),Object(l.jsx)("input",{className:"input",type:"text",placeholder:"Type a message...",value:u,onChange:function(e){var t=e.target.value;return b(t)},onKeyPress:function(e){return"Enter"===e.key?k(e):null}}),Object(l.jsx)("button",{className:"sendButton",onClick:function(e){return k(e)},children:"Send"})]})}),Object(l.jsx)(m,{messages:p})]})},z=n(73),G=n(7),Y=function(){return Object(l.jsx)(z.a,{children:Object(l.jsx)(G.a,{path:"/tarea3-ti",exact:!0,component:M})})};i.a.render(Object(l.jsx)(Y,{}),document.getElementById("root"))}},[[137,1,2]]]);
//# sourceMappingURL=main.6feb9773.chunk.js.map