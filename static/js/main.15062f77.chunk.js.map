{"version":3,"sources":["components/Home/Home.js","components/Home/Info/Flight/Flight.js","components/Home/Info/Info.js","components/Home/Messages/Message/Message.js","components/Home/Messages/Messages.js","components/Home/MyMap/MyMap.js","App.js","index.js"],"names":["socket","uuidv4","require","v4","Flight","airline","code","destination","origin","passengers","plane","seats","useState","lugar_dest","setLugar_dest","lugar_ori","setLugar_ori","useEffect","axios","get","then","res","feat","data","features","length","place_name","catch","err","console","log","className","map","name","age","Info","askFlights","flights","onClick","e","Mensaje","date","message","date_full","Date","parseInt","date_pretty","moment","format","Messages","messages","MyMap","Map","center","zoom","style","height","width","TileLayer","attribution","url","Home","setName","setMessage","setMessages","setFlights","io","path","on","sendMessage","event","preventDefault","emit","type","placeholder","value","onChange","target","onKeyPress","key","App","exact","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.15062f77.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport io from 'socket.io-client';\r\n\r\nimport Info from './Info/Info'\r\nimport Messages from './Messages/Messages'\r\n\r\nimport './Home.css';\r\nimport MyMap from \"./MyMap/MyMap\";\r\n\r\nconst ENDPOINT = 'wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl/';\r\n\r\nlet socket;\r\n\r\n// const { v4: uuidv4 } = require('uuid');\r\n\r\nconst Home = () => {\r\n\r\n    const [name, setName] = useState('');\r\n    const [message, setMessage] = useState('');\r\n    const [messages, setMessages] = useState([]);\r\n    const [flights, setFlights] = useState([]);\r\n\r\n    useEffect(() => {\r\n    socket = io(ENDPOINT, {path: '/flights'});\r\n    }, []);\r\n    \r\n    // Recibir mensaje\r\n    useEffect(() => {\r\n        socket.on('CHAT', message => {\r\n            console.log(message);\r\n            setMessages(messages => [ ...messages, message ]);\r\n            // console.log(messages);\r\n        });\r\n    }, []);\r\n\r\n    // Recibir flights\r\n    useEffect(() => {\r\n        socket.on('FLIGHTS', flights => {\r\n            console.log(flights);\r\n            setFlights(flights);\r\n        });\r\n    }, []);\r\n\r\n    //! Recibir position\r\n    // useEffect(() => {\r\n    //     socket.on('POSITION', pos => {\r\n    //         console.log(pos);\r\n    //     });\r\n    // });\r\n\r\n    const sendMessage = (event) => {\r\n        event.preventDefault();\r\n        console.log(message);\r\n        if (message) {\r\n            socket.emit('CHAT', {name: name, message: message}, () => setMessage(''));\r\n        }\r\n        setMessage('');\r\n    }\r\n\r\n    const askFlights = (event) => {\r\n        event.preventDefault();\r\n        console.log('Pidiendo vuelos');\r\n        socket.emit('FLIGHTS');\r\n    }\r\n\r\n    return (\r\n        <div className=\"home\">\r\n            <h1>Control Center</h1>\r\n\r\n            <MyMap />\r\n            <Info askFlights={askFlights} flights={flights} />\r\n\r\n            <h2>Chat</h2>\r\n            <div className=\"form-chat\">\r\n                <form className=\"form\">\r\n                    <input\r\n                    className=\"input\"\r\n                    type=\"text\"\r\n                    placeholder=\"Enter your name\"\r\n                    value={name}\r\n                    onChange={({ target: { value } }) => setName(value)}\r\n                    />\r\n                    <input\r\n                    className=\"input\"\r\n                    type=\"text\"\r\n                    placeholder=\"Type a message...\"\r\n                    value={message}\r\n                    onChange={({ target: { value } }) => setMessage(value)}\r\n                    onKeyPress={event => event.key === 'Enter' ? sendMessage(event) : null}\r\n                    />\r\n                    <button className=\"sendButton\" onClick={e => sendMessage(e)}>Send</button>\r\n                </form>\r\n            </div>\r\n            <Messages messages={messages} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Home;","import React, { useState, useEffect } from \"react\";\r\n\r\nimport axios from 'axios';\r\n\r\nimport './Flight.css';\r\n\r\nconst { v4: uuidv4 } = require('uuid');\r\n\r\nconst Flight = ({ airline, code, destination, origin, passengers, plane, seats }) => {\r\n\r\n    const [lugar_dest, setLugar_dest] = useState('');\r\n    const [lugar_ori, setLugar_ori] = useState('');\r\n\r\n    // const destino = () => {\r\n    //     const lat_dest = destination[0];\r\n    //     const long_dest = destination[1];\r\n\r\n    //     var place_dest = `https://api.mapbox.com/geocoding/v5/mapbox.places/${long_dest},${lat_dest}.json?access_token=pk.eyJ1IjoiY3NtZW5lc2VzIiwiYSI6ImNraWRueWxkZjB0cHQyeG80OHJ0cjhwMG0ifQ.04KZZVYMSB3lpPSby2Guqw`;\r\n\r\n    //     fetch(place_dest).then(function (response) {\r\n    //         return response.json();\r\n    //     }).then(function (obj) {\r\n            \r\n    //         var feat = obj.features\r\n    //         if (feat.length >= 3) {\r\n    //             setLugar_dest(feat[feat.length - 2].place_name);\r\n    //         } else {\r\n    //             setLugar_dest(feat[0].place_name);\r\n    //         }\r\n    //     });\r\n    // };\r\n\r\n    // destino();\r\n\r\n    // useEffect(() => {\r\n    //     const lat_ori = origin[0];\r\n    //     const long_ori = origin[1];\r\n\r\n    //     var place_ori = `https://api.mapbox.com/geocoding/v5/mapbox.places/${long_ori},${lat_ori}.json?access_token=pk.eyJ1IjoiY3NtZW5lc2VzIiwiYSI6ImNraWRueWxkZjB0cHQyeG80OHJ0cjhwMG0ifQ.04KZZVYMSB3lpPSby2Guqw`;\r\n\r\n    //     fetch(place_ori).then(function (response) {\r\n    //         return response.json();\r\n    //     }).then(function (obj) {\r\n            \r\n    //         var feat = obj.features\r\n    //         if (feat.length >= 3) {\r\n    //             setLugar_ori(feat[feat.length - 2].place_name);\r\n    //         } else {\r\n    //             setLugar_ori(feat[0].place_name);\r\n    //         }\r\n    //     });\r\n    // }, []);\r\n\r\n\r\n    useEffect(() => {\r\n        axios\r\n            .get(`https://api.mapbox.com/geocoding/v5/mapbox.places/${origin[1]},${origin[0]}.json?access_token=pk.eyJ1IjoiY3NtZW5lc2VzIiwiYSI6ImNraWRueWxkZjB0cHQyeG80OHJ0cjhwMG0ifQ.04KZZVYMSB3lpPSby2Guqw`)\r\n            .then(res => {\r\n                var feat = res.data.features;\r\n                if (feat.length >= 3) {\r\n                    setLugar_ori(feat[feat.length - 2].place_name);\r\n                } else {\r\n                    setLugar_ori(feat[feat.length - 2].place_name);\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n    });\r\n\r\n    useEffect(() => {\r\n        axios\r\n            .get(`https://api.mapbox.com/geocoding/v5/mapbox.places/${destination[1]},${destination[0]}.json?access_token=pk.eyJ1IjoiY3NtZW5lc2VzIiwiYSI6ImNraWRueWxkZjB0cHQyeG80OHJ0cjhwMG0ifQ.04KZZVYMSB3lpPSby2Guqw`)\r\n            .then(res => {\r\n                var feat = res.data.features;\r\n                if (feat.length >= 3) {\r\n                    setLugar_dest(feat[feat.length - 2].place_name);\r\n                } else {\r\n                    setLugar_dest(feat[feat.length - 2].place_name);\r\n                }\r\n            })\r\n            .catch(err => {\r\n                console.log(err)\r\n            })\r\n    });\r\n\r\n    return (\r\n        <div className=\"flight\">\r\n            <h3>Flight {code}</h3>\r\n            <p><b>Airline:</b> {airline}</p>\r\n            <p><b>Destination:</b> {lugar_dest}</p>\r\n            {/* Pasar a palabras */}\r\n            <p><b>Origin:</b> {lugar_ori}</p>\r\n            <p><b>Passengers:</b></p>\r\n            {passengers.map(({name, age}) => (\r\n                <div key={uuidv4()}>\r\n                    <ul>\r\n                        <li>{name} ({age})</li>\r\n                    </ul>\r\n                </div>\r\n            ))}\r\n            <p><b>Plane:</b> {plane}</p>\r\n            <p><b>Seats:</b> {seats}</p>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Flight;","import React from \"react\";\r\n\r\nimport Flight from './Flight/Flight';\r\n\r\nimport './Info.css';\r\n\r\nconst { v4: uuidv4 } = require('uuid');\r\n\r\nconst Info = ({ askFlights, flights }) => {\r\n    return (\r\n        <div>\r\n            <h2>INFO</h2>\r\n            <button className=\"infoButton\" onClick={e => askFlights(e)}>Get Info</button>\r\n            {flights.map(({airline, code, destination, origin, passengers, plane, seats}) => (\r\n                <Flight key={uuidv4()} airline={airline} code={code} destination={destination} origin={origin} passengers={passengers} plane={plane} seats={seats} />\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Info;\r\n  ","import React from \"react\";\r\n\r\nimport moment from 'moment';\r\n\r\nimport './Message.css';\r\n\r\nconst Mensaje = ({ name, date, message }) => {\r\n    \r\n    var date_full = new Date(parseInt(date));\r\n    var date_pretty = moment(date_full).format('DD/MM/YYYY HH:mm');\r\n\r\n    return (\r\n        <div className=\"mensaje\">\r\n            <b>{name}:</b>\r\n            <br></br>\r\n            [{date_pretty}] {message}\r\n            <br></br>\r\n        </div>\r\n    );\r\n  }\r\n\r\nexport default Mensaje;\r\n","import React from \"react\";\r\n\r\nimport Message from './Message/Message';\r\n\r\nimport './Messages.css';\r\n\r\nconst { v4: uuidv4 } = require('uuid');\r\n\r\nconst Messages = ({ messages }) => {\r\n    return (\r\n        <div className=\"Mensajes\">\r\n            <h2>Messages</h2>\r\n            {messages.map(({name, date, message}) => (\r\n                <Message key={uuidv4()} name={name} date={date} message={message} />\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Messages;\r\n","import React from \"react\";\r\nimport {Map, TileLayer, Marker, Popup} from 'react-leaflet'\r\n\r\n\r\n\r\nconst MyMap = () => {\r\n    const position = [-30, -70];\r\n    return (\r\n        <div className=\"map-container\">\r\n            <h2>Flight Map</h2>\r\n            <Map \r\n                className=\"map\"\r\n                center={position}\r\n                zoom={4}\r\n                style={{height: 400, width: \"50%\"}}\r\n            >\r\n                <TileLayer\r\n                    attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n                    url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                />\r\n            </Map>\r\n        </div>\r\n        \r\n    );\r\n}\r\n\r\nexport default MyMap;","import React from 'react';\r\n\r\nimport Home from './components/Home/Home'\r\n\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <Router>\r\n      <Route path=\"/tarea3-ti\" exact component={Home} />\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport 'leaflet/dist/leaflet.css';\r\n\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}