{"version":3,"sources":["components/Home/Home.js","components/Home/Map/Map.js","components/Home/Info/Info.js","components/Home/Messages/Message/Message.js","components/Home/Messages/Messages.js","App.js","index.js"],"names":["socket","Map","Info","Mensaje","name","date","message","date_full","Date","parseInt","date_pretty","moment","format","className","uuidv4","require","v4","Messages","messages","map","Home","location","useState","setName","setMessage","setMessages","useEffect","io","path","on","console","log","sendMessage","event","preventDefault","emit","type","placeholder","value","onChange","target","onKeyPress","key","onClick","e","App","exact","component","ReactDOM","render","document","getElementById"],"mappings":";uLAWIA,E,gECHaC,EANL,SAAC,GAAe,EAAbD,OACX,OACE,sCCIWE,EANJ,WACT,OACE,uC,iBCiBSC,G,MAfC,SAAC,GAA6B,IAA3BC,EAA0B,EAA1BA,KAAMC,EAAoB,EAApBA,KAAMC,EAAc,EAAdA,QAEvBC,EAAY,IAAIC,KAAKC,SAASJ,IAC9BK,EAAcC,IAAOJ,GAAWK,OAAO,oBAE3C,OACI,sBAAKC,UAAU,UAAf,UACI,8BAAIT,EAAJ,OACA,uBAFJ,IAGMM,EAHN,KAGqBJ,EACjB,4BCVAQ,G,MAAWC,EAAQ,IAAvBC,IAaOC,EAXE,SAAC,GAAkB,IAAhBC,EAAe,EAAfA,SAChB,OACI,sBAAKL,UAAU,WAAf,UACI,0CACCK,EAASC,KAAI,gBAAEf,EAAF,EAAEA,KAAMC,EAAR,EAAQA,KAAMC,EAAd,EAAcA,QAAd,OACV,cAAC,EAAD,CAAwBF,KAAMA,EAAMC,KAAMA,EAAMC,QAASA,GAA3CQ,YJwFfM,G,MAtFF,SAAC,GAAiB,EAAfC,SAAgB,IAE5B,EAAwBC,mBAAS,IAAjC,mBAAOlB,EAAP,KAAamB,EAAb,KACA,EAA8BD,mBAAS,IAAvC,mBAAOhB,EAAP,KAAgBkB,EAAhB,KACA,EAAgCF,mBAAS,IAAzC,mBAAOJ,EAAP,KAAiBO,EAAjB,KAEAC,qBAAU,WACV1B,EAAS2B,IAbI,yDAaS,CAACC,KAAM,eAC1B,IAGHF,qBAAU,WACN1B,EAAO6B,GAAG,QAAQ,SAAAvB,GACdwB,QAAQC,IAAIzB,GACZmB,GAAY,SAAAP,GAAQ,4BAASA,GAAT,CAAmBZ,YAG5C,IA0BH,IAAM0B,EAAc,SAACC,GACjBA,EAAMC,iBACNJ,QAAQC,IAAIzB,GACRA,GACAN,EAAOmC,KAAK,OAAQ,CAAC/B,KAAMA,EAAME,QAASA,IAAU,kBAAMkB,EAAW,OAEzEA,EAAW,KAIf,OACI,sBAAKX,UAAU,OAAf,UAEI,cAAC,EAAD,IACA,cAAC,EAAD,IAEA,mDACA,sCACA,qBAAKA,UAAU,YAAf,SACI,uBAAMA,UAAU,OAAhB,UACI,uBACAA,UAAU,QACVuB,KAAK,OACLC,YAAY,kBACZC,MAAOlC,EACPmC,SAAU,gBAAaD,EAAb,EAAGE,OAAUF,MAAb,OAA2Bf,EAAQe,MAE7C,uBACAzB,UAAU,QACVuB,KAAK,OACLC,YAAY,oBACZC,MAAOhC,EACPiC,SAAU,gBAAaD,EAAb,EAAGE,OAAUF,MAAb,OAA2Bd,EAAWc,IAChDG,WAAY,SAAAR,GAAK,MAAkB,UAAdA,EAAMS,IAAkBV,EAAYC,GAAS,QAElE,wBAAQpB,UAAU,aAAa8B,QAAS,SAAAC,GAAC,OAAIZ,EAAYY,IAAzD,uBAGR,cAAC,EAAD,CAAU1B,SAAUA,S,eKlFjB2B,EARH,WACV,OACE,cAAC,IAAD,UACE,cAAC,IAAD,CAAOjB,KAAK,aAAakB,OAAK,EAACC,UAAW3B,OCJhD4B,IAASC,OAAO,cAAC,EAAD,IAASC,SAASC,eAAe,W","file":"static/js/main.4b7a4c61.chunk.js","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport io from 'socket.io-client';\r\n\r\nimport Map from './Map/Map'\r\nimport Info from './Info/Info'\r\nimport Messages from './Messages/Messages'\r\n\r\nimport './Home.css';\r\n\r\nconst ENDPOINT = 'wss://tarea-3-websocket.2021-1.tallerdeintegracion.cl/';\r\n\r\nlet socket;\r\n\r\n// const { v4: uuidv4 } = require('uuid');\r\n\r\nconst Home = ({ location }) => {\r\n\r\n    const [name, setName] = useState('');\r\n    const [message, setMessage] = useState('');\r\n    const [messages, setMessages] = useState([]);\r\n\r\n    useEffect(() => {\r\n    socket = io(ENDPOINT, {path: '/flights'});\r\n    }, []);\r\n    \r\n    // Recibir mensaje\r\n    useEffect(() => {\r\n        socket.on('CHAT', message => {\r\n            console.log(message);\r\n            setMessages(messages => [ ...messages, message ]);\r\n            // console.log(messages);\r\n        });\r\n    }, []);\r\n\r\n    //! Enviar mensaje\r\n    // useEffect(() => {\r\n    //     socket.emit('CHAT', {name: \"El Sujeto\", message: \"Buena\"});\r\n    // }, []);\r\n\r\n    //! Pedir flights\r\n    // useEffect(() => {\r\n    //     socket.emit('FLIGHTS');\r\n    // });\r\n\r\n    //! Recibir flights\r\n    // useEffect(() => {\r\n    //     socket.on('FLIGHTS', flights => {\r\n    //         console.log(flights);\r\n    //     });\r\n    // });\r\n\r\n    //! Recibir position\r\n    // useEffect(() => {\r\n    //     socket.on('POSITION', pos => {\r\n    //         console.log(pos);\r\n    //     });\r\n    // });\r\n\r\n    const sendMessage = (event) => {\r\n        event.preventDefault();\r\n        console.log(message);\r\n        if (message) {\r\n            socket.emit('CHAT', {name: name, message: message}, () => setMessage(''));\r\n        }\r\n        setMessage('');\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"home\">\r\n\r\n            <Map />\r\n            <Info />\r\n\r\n            <h1>Centro de Control</h1>\r\n            <h2>Chat</h2>\r\n            <div className=\"form-chat\">\r\n                <form className=\"form\">\r\n                    <input\r\n                    className=\"input\"\r\n                    type=\"text\"\r\n                    placeholder=\"Enter your name\"\r\n                    value={name}\r\n                    onChange={({ target: { value } }) => setName(value)}\r\n                    />\r\n                    <input\r\n                    className=\"input\"\r\n                    type=\"text\"\r\n                    placeholder=\"Type a message...\"\r\n                    value={message}\r\n                    onChange={({ target: { value } }) => setMessage(value)}\r\n                    onKeyPress={event => event.key === 'Enter' ? sendMessage(event) : null}\r\n                    />\r\n                    <button className=\"sendButton\" onClick={e => sendMessage(e)}>Send</button>\r\n                </form>\r\n            </div>\r\n            <Messages messages={messages} />\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Home;","import React, { useState, useEffect } from \"react\";\r\n\r\nconst Map = ({ socket }) => {\r\n    return (\r\n      <h1>MAP</h1>\r\n    );\r\n  }\r\n  \r\n  export default Map;\r\n  ","import React, { useState, useEffect } from \"react\";\r\n\r\nconst Info = () => {\r\n    return (\r\n      <h1>INFO</h1>\r\n    );\r\n  }\r\n  \r\n  export default Info;\r\n  ","import React from \"react\";\r\n\r\nimport moment from 'moment';\r\n\r\nimport './Message.css';\r\n\r\nconst Mensaje = ({ name, date, message }) => {\r\n    \r\n    var date_full = new Date(parseInt(date));\r\n    var date_pretty = moment(date_full).format('DD/MM/YYYY HH:mm');\r\n\r\n    return (\r\n        <div className=\"mensaje\">\r\n            <b>{name}:</b>\r\n            <br></br>\r\n            [{date_pretty}] {message}\r\n            <br></br>\r\n        </div>\r\n    );\r\n  }\r\n\r\nexport default Mensaje;\r\n","import React from \"react\";\r\n\r\nimport Message from './Message/Message';\r\n\r\nimport './Messages.css';\r\n\r\nconst { v4: uuidv4 } = require('uuid');\r\n\r\nconst Messages = ({ messages }) => {\r\n    return (\r\n        <div className=\"Mensajes\">\r\n            <h2>Messages</h2>\r\n            {messages.map(({name, date, message}) => (\r\n                <Message key={uuidv4()} name={name} date={date} message={message} />\r\n            ))}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Messages;\r\n","import React from 'react';\r\n\r\nimport Home from './components/Home/Home'\r\n\r\nimport { BrowserRouter as Router, Route } from \"react-router-dom\";\r\n\r\nconst App = () => {\r\n  return (\r\n    <Router>\r\n      <Route path=\"/tarea3-ti\" exact component={Home} />\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport App from './App'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}